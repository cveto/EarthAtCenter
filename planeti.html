

<style>

body
{
   font-size: 1em !important;
   color: #000 !important;
   font-family: monospace !important;

}

.button {
  padding: 5px 5px;
  width: 250px;
  text-align: center;
  font-weight: bold;
}

input[type="range"] {
  width:170px;
}

#range_planetsToScale {
  width:30px;
}

#range_downloadFrames {
  width:30px;
}


/* THIS ACTUALLY DOES THINGS */
#test_canvas {
  visibility: hidden;
}

#wrapper {
    width: 100%;
}
			#levi {
				word-wrap: break-word;
				padding: 12px;
					width: 300px;
					float: left;
					height: 100%;
					-webkit-box-sizing: border-box;
					-moz-box-sizing: border-box;
					box-sizing: border-box;
					border-style: groove;
					height: 1087px;
				  background-color: #FFFAF0;
			}

			#desni {
			  float: left;
			  position: relative;
				/*Declare width and it will break, unless in percentages*/
				float: left;
				border-right: 1px solid white;
				-webkit-box-sizing: border-box;
				-moz-box-sizing: border-box;
				box-sizing: border-box;

			}

				#zadej {
				  /* width: 1920px; */
				  height: 1080px;
				  position: absolute;
				  top: 0;
				  left: 0;
				  background-color: #FFFEE1	       ;
				}
				
				#spredej {
				  /* width: 1920px; */  /*THIS BREAKS THEM ON TWO FRO SOME RSASON*/
				  height: 1080px;
				  position: absolute;
				  top: 0;
				  left: 0;
				  z-index: 10;
				  border-style: groove;
				}
				
				#seboljspredej {
				  /* width: 1920px; */  /*THIS BREAKS THEM ON TWO FRO SOME RSASON*/
				  height: 1080px;
				  position: absolute;
				  top: 0;
				  left: 0;
				  z-index: 20;
				  border-style: groove;
				}

</style>

<script>

// This is a model which simulates OUR solar system. It's based on real eliptical trajectories. 
// Distances from sun to the planets are scalled correctly. 
// Sizes of planets not scaled for obvious reasons. (planets to tiny to show on canvas)
// CLICK ON THE BUTTON FOR GEOCENTRICAL MODEL and see how planets move if you take EARTH as the center of the universe.
// Interesting thing: Trajectories tend to cross over one another - but it's fairly obvious planet won't bump together from the/
// Heliocentrical model. So what gives?
// Counting earth years has a roblem if staeting angle is 0;

// Declaring global variables.. is this necessary?
var canvas;
var canvasbg;

var context;
var contextbg;
var contextfg;

var canvasHeight=1080;
var canvasWidth=1920;
var contextWidth=canvasWidth;
var contextHeight=canvasHeight;
var posCenterX=contextWidth/2;
var posCenterY=contextHeight/2;

// TIME STOP
timeIncreasing = 1;

/////////// CONSTANTS and it's derivations ////////////
// Year length for planets in 
var daysMercury=87.97;
var daysVenus=224.701;
var daysEarth=365.265;
var daysMars=686.971;
var daysJupiter=4332.59;
var daysSaturn=10759.22;
var daysUranus=30688.5;
var daysNeptune=60182;
var daysPluto=90560;

var daysMoon=27.322;

// Distance from planets Sun in Astronomival units (calucaltions come from the eliptical equatino in kartezian coordinates)
	// Mercury
var distMercury=0.39;
var aphelionMercury=0.46667;
var perihelionMercury=0.307499;
var amplitudeXMercury=(aphelionMercury+perihelionMercury)/2; 		
var linear_e_Mercury=amplitudeXMercury-perihelionMercury;					
var amplitudeYMercury=Math.sqrt(Math.pow(amplitudeXMercury,2)-Math.pow(linear_e_Mercury,2));
var radiusMercury=0.3829;

	// Venus
var distVenus=0.723;
var aphelionVenus=0.728213;
var perihelionVenus=0.716449;
var amplitudeXVenus=(aphelionVenus+perihelionVenus)/2; 		
var linear_e_Venus=amplitudeXVenus-perihelionVenus;					
var amplitudeYVenus=Math.sqrt(Math.pow(amplitudeXVenus,2)-Math.pow(linear_e_Venus,2));
var radiusVenus=0.9499;

	// Earth
var distEarth=1;  // around 1, +- and
var aphelionEarth=1.0167;
var perihelionEarth=0.98329;
var amplitudeXEarth=(aphelionEarth+perihelionEarth)/2; 		 // How much left and right for X
var linear_e_Earth=amplitudeXEarth-perihelionEarth;					// offset How much away from the center of elipse
var amplitudeYEarth=Math.sqrt(Math.pow(amplitudeXEarth,2)-Math.pow(linear_e_Earth,2));
var daysInEarthYear=365.2422;
var radiusEarth=1

	// Mars
var distMars=1.524; 
var aphelionMars=1.666;
var perihelionMars=1.382;
var amplitudeXMars=(aphelionMars+perihelionMars)/2; 		
var linear_e_Mars=amplitudeXMars-perihelionMars;					
var amplitudeYMars=Math.sqrt(Math.pow(amplitudeXMars,2)-Math.pow(linear_e_Mars,2));
var radiusMars=0.5320;

	// Jupiter
var distJupiter=5.203;
var aphelionJupiter=5.4588;
var perihelionJupiter=4.9501;
var amplitudeXJupiter=(aphelionJupiter+perihelionJupiter)/2; 		
var linear_e_Jupiter=amplitudeXJupiter-perihelionJupiter;					
var amplitudeYJupiter=Math.sqrt(Math.pow(amplitudeXJupiter,2)-Math.pow(linear_e_Jupiter,2));
var radiusJupiter=10.97

	// Saturn
var distSaturn=9.539;
var aphelionSaturn=10.1238;
var perihelionSaturn=9.0412;
var amplitudeXSaturn=(aphelionSaturn+perihelionSaturn)/2; 		
var linear_e_Saturn=amplitudeXSaturn-perihelionSaturn;					
var amplitudeYSaturn=Math.sqrt(Math.pow(amplitudeXSaturn,2)-Math.pow(linear_e_Saturn,2));
var radiusSaturn=9.140

	// Uranus
var distUranus=19.18;
var aphelionUranus=20.11;
var perihelionUranus=18.33;
var amplitudeXUranus=(aphelionUranus+perihelionUranus)/2; 		
var linear_e_Uranus=amplitudeXUranus-perihelionUranus;					
var amplitudeYUranus=Math.sqrt(Math.pow(amplitudeXUranus,2)-Math.pow(linear_e_Uranus,2));
var radiusUranus=3.981;

	// Neptune
var distNeptune=30.06;
var aphelionNeptune=30.33;
var perihelionNeptune=29.81;
var amplitudeXNeptune=(aphelionNeptune+perihelionNeptune)/2; 		
var linear_e_Neptune=amplitudeXNeptune-perihelionNeptune;					
var amplitudeYNeptune=Math.sqrt(Math.pow(amplitudeXNeptune,2)-Math.pow(linear_e_Neptune,2));
var radiusNeptune=3.865;

	// PLUTO
var distPluto=39.5
var aphelionPluto=49.305
var perihelionPluto=29.658
var amplitudeXPluto=(aphelionPluto+perihelionPluto)/2; 		
var linear_e_Pluto=amplitudeXPluto-perihelionPluto;					
var amplitudeYPluto=Math.sqrt(Math.pow(amplitudeXPluto,2)-Math.pow(linear_e_Pluto,2));
var radiusPluto=0.186;


// Sun
var radiusSun=109.3	// Earth radiuses


var distMoon;
var radiusMoon=0.2727;


	// Weighing Astronomical units so they can fit on the Canvas nicely.
var distWeight=110;


// Starting position of the planetary body on the canvas
// Only center for sun and Earth is really needed, the rest was put there for future proofing and because I like to declare variables.
//-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

var posSunX=posCenterX;
var posSunY=posCenterY;
var posMercuryX=posCenterX;
var posMercuryY=posCenterY;
var posVenusX=posCenterX;
var posVenusY=posCenterY;
var posEarthX=posCenterX;
var posEarthY=posCenterY;
var posMarsX=posCenterX;
var posMarsY=posCenterY;
var posJupiterX=posCenterX;
var posJupiterY=posCenterY;
var posSaturnX=posCenterX;
var posSaturnY=posCenterY;
var posUranusX=posCenterX;
var posUranusY=posCenterY;
var posNeputneX=posCenterX;
var posNeptuneY=posCenterY;
var posPlutoX=posCenterX;
var posPlutoY=posCenterY;
var posMoonX;
var posMoonY;

// Speed of going around the sun
var speedEarth; 			// max 1
var drawInterval=40;			// 40 is 25 frames per second..  300 works saving 1920 1080 with mozilla.. will try 4K..

// Poolar coordinate of the planetary body (used to derivate it to cartesian)
// fi goes from -3.14 to +3.14 radians
var fi=0;
var fiMercury=0;
var fiVenus=0;
var fiMars=0;
var fiJupiter=0;
var fiSaturn=0;
var fiUranus=0;
var fiNeptune=0;
var fiPluto=0;
var fiMoon=0;

// fid will be weighed. Would be smarter to make cos(omega*t).. why didn't i think this through....
var fid;
var fidMercury;
var fidVenus;
var fidMars;
var fidJupiter;
var fidSaturn;
var fidUranus;
var fidNeptune;
var fidPluto;
var fidMoon;

// Ectra feautures.
var drawOn=0;
var testOn=0;
var dfi=1;				// How much the angle changes per frame

var stikalo=0;			// Button is OFF
var earthYears=0;	
var pause = 1;
var linethickness=2;	// default, will be rewritten

var planetSizeMORTY=15;
var frameCounter=0;

// FLAGS
var flag_draw=0;
var fidold=0;
var fidold2=0;
var flag_earthYears=0;		// MY WEBSITE LOADS IN THE VIEW OF VISIBLE PLANETS
var flag_earthYears2=1;
var flagPlanetToScale=0;
// LOADS WITH HTML ONCE
function init() {


//	// IF HOLDING DOWN A KEY ON KEYBOARD
//	document.body.onkeydown = function(e){
//		if (e.keyCode == 68){									// D
//				toggleDraw();
//		} else if (e.keyCode == 76){							// M
//				togglePlanet("markMercury");
//		} else if (e.keyCode == 86){							// V
//				togglePlanet("markVenus");
//		} else if (e.keyCode == 69){							// E
//				togglePlanet("markEarth");
//		} else if (e.keyCode == 77){							// M
//				togglePlanet("markMars");
//		} else if (e.keyCode == 74){							// J
//				togglePlanet("markJupiter");
//		} else if (e.keyCode == 83){							// S
//				togglePlanet("markSaturn");
//		} else if (e.keyCode == 82){							// R for RockMoon
//				togglePlanet("markMoon");
//		}else if (e.keyCode == 67){							// R for RockMoon
//				clear();
//		}
//	}	
	
	// UNCHECK ALL TICKBOXES
	document.getElementById("markMercury").checked=0;
	document.getElementById("markVenus").checked=0;
	document.getElementById("markEarth").checked=1;
	document.getElementById("markMars").checked=0;
	document.getElementById("markJupiter").checked=0;
	document.getElementById("markSaturn").checked=0;
	document.getElementById("markUranus").checked=0;
	document.getElementById("markNeptune").checked=0;
	document.getElementById("markPluto").checked=0;
	
	document.getElementById("markMoon").checked=1;
	document.getElementById("markSun").checked=1;
	document.getElementById("range_downloadFrames").value=0;



  // Background CANVAS 

  	    canvasbg = document.getElementById("backgroundCanvas");
		canvasbg.width=canvasWidth;
		canvasbg.height=canvasHeight;
		
	contextbg = canvasbg.getContext("2d");
	
  // FG Floating elaway refreshed canvas CANVAS 

  	    canvasfg = document.getElementById("fgcanvas");
		canvasfg.width=canvasWidth;
		canvasfg.height=canvasHeight;
		
	contextfg = canvasfg.getContext("2d");
		
  // Loads on page load. Sets upa  canvas and calls function many times per second
  
  	    canvas = document.getElementById("myCanvas");
		canvas.width=canvasWidth;
		canvas.height=canvasHeight;
	
	context = canvas.getContext("2d");
	
// DRAW SOMETHING

  
  setInterval(draw,drawInterval);					// Calls function draw 40 times a...? Well often.	
 
}

// MAIN FUNCTION
function draw() {
	// -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	// AM I ON PAUSE?
		if (timeIncreasing == 1) {
			frameCounter+=1;
		}
	

	
	// PLANET SIZE
	planetSizeMORTY=Number(document.getElementById("range_planetSize").value);

	// SHOW HOW MANY FRAMES
	document.getElementById("frameCounter").innerHTML=frameCounter;
	
	// -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+	
	// GET DATA FROM USER
		// Line thickness
		linethickness = Number(document.getElementById("sliderLineThickness").value);
		document.getElementById("valueLine").innerHTML=linethickness;
	
	// SPEEDS OF PLANETS REALTIVE TO EARTH
		// Why was this done like this and not with angular frequency?
		// Because absolute speed doesn't matter. All that matters is the realitve body speed.
		
		//speedEarth = document.getElementById("sliderSpeed").value
		var samplesPerEarthYear = document.getElementById("sliderSpeed").value/10;
		speedEarth=(10*Math.PI)/(dfi*samplesPerEarthYear);
		document.getElementById("valueSpeed").innerHTML=samplesPerEarthYear;
	

	//	How many dots per year -?
				// fid = N * speedEarth * dfi/10
				// Ko je fid = 2*PI, je en krog okoli zemlje, e.g. 365..11? dni
				// Kdaj je fid 2*PI*  fid  = 2*PI = N * speedEarth * dfi/10
				// N = (10*2PI)/(speedEarth*dfi) . toliko pik
				//fid= (speedEarth*0.1*fi)..  ko je fid 2*PI, je  1 leto, torej.. speedEarth
				
		//var DotsPerEarthYear=(10*Math.PI*2)/(dfi*speedEarth);	// I dont
			// The distance between theese dots represent a certain time..  365days/DotsPerEarthYear=Time between 2 dots
			// wHAT IS the distance between 2 dots?
			// IT shows speed, not time. Speed relative to sun, speed relative to earth
			// Speed realtive to sun: Earth 2 dots means.. v=s/t, t imam,
			
			//var eartHoursBetween2dots=365/DotsPerEarthYear*24;
			// var 
			

	// PICTURES FOR PLANETS
		var imgmercury = document.getElementById("imgmercury");
		var imgvenus = document.getElementById("imgvenus");
		var imgearth = document.getElementById("imgearth");
		var imgmars = document.getElementById("imgmars");
		var imgjupiter = document.getElementById("imgjupiter");
		var imgsun = document.getElementById("imgsun");
		var imgmoon = document.getElementById("imgmoon");

	// -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+	
	// CALCULATE PLANET ROTATION SPEED - maybe we move that in the init, this is static.
	// SPEEDS
		var speedMercury=speedEarth/(daysMercury/daysEarth);
		var speedVenus=speedEarth/(daysVenus/daysEarth);
		var speedMars=speedEarth/(daysMars/daysEarth);
		var speedJupiter=speedEarth/(daysJupiter/daysEarth);
		var speedSaturn=speedEarth/(daysSaturn/daysEarth);
		var speedUranus=speedEarth/(daysUranus/daysEarth);
		var speedNeptune=speedEarth/(daysNeptune/daysEarth);
		var speedPluto=speedEarth/(daysPluto/daysEarth);
		var speedMoon=speedEarth/(daysMoon/daysEarth);
		
		
	// -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+	
	// ANIMATION
	// THIS MAKES THEM TICK.  
	if (timeIncreasing==1) {

	 	// FI angle of the EARTH (omega*t) fid is (speed*omega*t)
	 	fi+=0.1*dfi;			// THIS SHOULD BE TIME..it is what it is.
	 	fid = speedEarth*fi;  		
	 
	 	// KEEPING TRACK OF TIME - this is to remember at what position draw on of was clicked  - so it only counts years from that angle.
		//	WORKS FOR ANY ANGLE EXCEPT 0.. for that the logic is down below
////	 		if (drawOn==0) {
////	 			// I AM NOT IN DRAW MODE
////	 			fidold=fid;
////	 			flag_earthYears=0;			// DONT COUINT
////	 		}
////	 		if (fid < fidold) {		// He must have gone throug 0 already - count next one
////	 			flag_earthYears=1;
////	 		}
////	 
////	 		if (fid>fidold && flag_earthYears==1) {
////	 			// A year has pased since we started drawing
////	 			flag_earthYears=0;
////	 			earthYears+=1;					// THIS NEEDS TO BE SMARTER
////	 		} 
////	 		
////	 		
////	 		// KEEPING TRACK OF TIME 2
////	 		if (drawOn==1) {
////	 			// I AM NOT IN DRAW MODE
////	 			fidold2=fid;
////	 			flag_earthYears2=0;			// DONT COUINT
////	 		}
////	 		if (fid < fidold2) {		
////	 			flag_earthYears2=1;
////	 		}
////	 
////	 		if (fid>fidold2 && flag_earthYears2==1 && fidold2 != 0) {		// He shouldn't be zero... bechaoe.
////	 			// A year has pased since we started drawing
////	 			flag_earthYears2=0;
////	 			earthYears+=1;					// THIS NEEDS TO BE SMARTER
////	 		} 
	 	
	 
	 	
	 // CYCLICAL ANGLES - FOR ALL PLANETS
	 	if (fid >= Math.PI*2) {
	 		fi = (fid-(2*Math.PI))/speedEarth;		// NOT ZERO, it's already over!  
	 		flag_earthYears=1;
	 		
			// KEEPING TRACK ON TIME IF ANGLE IS 0.
////	 		if (fidold2==0 || fidold==0) {
	 			earthYears+=1;
////	 		}
	 	}
	 	fi+=0.1*dfi;
	 
	 	
	 	// MERCURY phi
	 	fiMercury+=0.1*dfi;
	 	fidMercury = speedMercury*fiMercury;
	 	if (fidMercury > Math.PI*2) {
	 	}
			fiMercury = (fidMercury-(2*Math.PI))/speedMercury;
	 	fiMercury+=0.1*dfi;
	 
	 	// VENUS phi
	 	fiVenus+=0.1*dfi;
	 	fidVenus = speedVenus*fiVenus;			// fi = omegat*t = 
		
	 	if (fidVenus >= Math.PI*2) {
	 		//fiVenus = 0.1*dfi;		// NOPE; THAT EINT RIGHT.
			fiVenus = (fidVenus-(2*Math.PI))/speedVenus;		// THE SOLUTION IS WORSE THAN THE PROBLEM. (Yeah,..You know what year this was written is...)

	 	}
	 	fiVenus+=0.1*dfi;
	 
	 	// MARS phi
	 	fiMars+=0.1*dfi;
	 	fidMars = speedMars*fiMars;
	 	if (fidMars > Math.PI*2) {
	 		fiMars = (fidMars-(2*Math.PI))/speedMars;
	 	}
	 	fiMars+=0.1*dfi;
	 
	 	// JUPITER phi
	 	fiJupiter+=0.1*dfi;
	 	fidJupiter = speedJupiter*fiJupiter;
	 	if (fidJupiter > Math.PI*2) {
	 		fiJupiter = (fidJupiter-(2*Math.PI))/speedJupiter;
	 	}
	 	fiJupiter+=0.1*dfi;	
	 
	 	// Saturn phi
	 	fiSaturn+=0.1*dfi;
	 	fidSaturn = speedSaturn*fiSaturn;
	 	if (fidSaturn > Math.PI*2) {
	 		fiSaturn = (fidSaturn-(2*Math.PI))/speedSaturn;
	 	}
	 	fiSaturn+=0.1*dfi;				
	 	
	 	// Uranus phi
	 	fiUranus+=0.1*dfi;
	 	fidUranus = speedUranus*fiUranus;
	 	if (fidUranus > Math.PI*2) {
	 		fiUranus = (fidUranus-(2*Math.PI))/speedUranus;
	 	}
	 	fiUranus+=0.1*dfi;				
	 
	 	// Neptune phi
	 	fiNeptune+=0.1*dfi;
	 	fidNeptune = speedNeptune*fiNeptune;
	 	if (fidNeptune > Math.PI*2) {
	 		fiNeptune = (fidNeptune-(2*Math.PI))/speedNeptune;
	 	}
	 	fiNeptune+=0.1*dfi;				
	 	
	 	// Pluto phi
	 	fiPluto+=0.1*dfi;
	 	fidPluto = speedPluto*fiPluto;
	 	if (fidPluto > Math.PI*2) {
	 		fiPluto = (fidPluto-(2*Math.PI))/speedPluto;
	 	}
	 	fiPluto+=0.1*dfi;				
	 	
	 	// Testing
	 	// Moon phi
	 	fiMoon+=0.1*dfi;
	 	fidMoon = speedMoon*fiMoon;
	 	if (fidMoon > Math.PI*2) {
	 		fiMoon = 0;
	 	}
	 	fiMoon+=0.1*dfi;	
	}
	
    // Save old coordinates of Earth for Geocentric model 
		// Why? So I know how to move the coordinate system to put Earth always to the center
		
		posEarthOLDx=posEarthX;
		posEarthOLDy=posEarthY;
		
		
		
	// COORDINATES OF EARTH
	//	posEarthX = posSunX+linear_e_Earth+distWeight*amplitudeXEarth*Math.cos(fid);
	//	posEarthY = posSunY+distWeight*amplitudeYEarth*Math.sin(fid);
//		
		
		posEarthX = (posSunX+distWeight*linear_e_Earth)+(distWeight*aphelionEarth*Math.cos(fid));
		posEarthY = posSunY+distWeight*amplitudeYEarth*Math.sin(fid);
				
	
	// BUTTON TO PUT EARTH TO CENTER (Resets coordinates).. why does it also work for the sun?
		button_Centralize.onclick = function(event) {
			clear();
			posEarthX=posCenterX;
			posEarthY=posCenterY;
			context.setTransform(1, 0, 0, 1, 0, 0);			// Resets the canvas
			contextfg.setTransform(1, 0, 0, 1, 0, 0);			// Resets the canvas

		};


		// BUTTON TO ZOOM OUT SO PLANET TRAJECTORY FITS THE SCREEN WHEN EARTH IS AT ITS CENTRE. ORDER MATTERS
		var furthestPlanetfromEarth;
		button_NormalizeZoom.onclick = function(event) {
		
		reset_canvas();
		
			posEarthX=posCenterX;
			posEarthY=posCenterY;		
		context.setTransform(1, 0, 0, 1, 0, 0);			// Resets the canvas
		contextfg.setTransform(1, 0, 0, 1, 0, 0);			// Resets the canvas
		
		if (stikalo==1) {		// SUN IS AT CENTER IF STIKALO = 0
		// NORMALIZE IF EARTH IS CENTER
			// Check every one by size - from furthest to least further
			if (document.getElementById("markPluto").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionPluto;
				
			} else if (document.getElementById("markNeptune").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionNeptune;
				
			} else if (document.getElementById("markUranus").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionUranus;
				
			} else if (document.getElementById("markSaturn").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionSaturn;
				
			} else if (document.getElementById("markJupiter").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionJupiter;
				
			} else if (document.getElementById("markMars").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionMars;
				
			}  else if (document.getElementById("markVenus").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionVenus;
				
			} else if (document.getElementById("markMercury").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionMercury;
				
			} else if (document.getElementById("markEarth").checked==1) {
				furthestPlanetfromEarth=aphelionEarth;
			}
		
		} else {
			// NORMALIZE IF SUN IS CENTER
				if (document.getElementById("markPluto").checked==1) {
					furthestPlanetfromEarth=aphelionPluto;
					
				} else if (document.getElementById("markNeptune").checked==1) {
					furthestPlanetfromEarth=aphelionNeptune;
					
				} else if (document.getElementById("markUranus").checked==1) {
					furthestPlanetfromEarth=aphelionUranus;
					
				} else if (document.getElementById("markSaturn").checked==1) {
					furthestPlanetfromEarth=aphelionSaturn;
					
				} else if (document.getElementById("markJupiter").checked==1) {
					furthestPlanetfromEarth=aphelionJupiter;
					
				} else if (document.getElementById("markMars").checked==1) {
					furthestPlanetfromEarth=aphelionMars;
					
				}  else if (document.getElementById("markVenus").checked==1) {
					furthestPlanetfromEarth=aphelionVenus;
					
				} else if (document.getElementById("markMercury").checked==1) {
					furthestPlanetfromEarth=aphelionMercury;
					
				} else if (document.getElementById("markEarth").checked==1) {
					furthestPlanetfromEarth=aphelionEarth;
				}
			}
			
		


		
		distWeight=(canvasHeight*0.50)/furthestPlanetfromEarth;				// Maxium distance from the center (the earth) to the edge (FULL HAD 1080pixeld halfed) should be distance from earth to planet which is earth - sun + sun - aphelion planet
		document.getElementById("sliderSize").value=distWeight;
    };
	
	
	
	// Toggle between Geocentrical and Heliocentrical model - for EARTH only.. obviusly
		if (stikalo == 1) {
			trnx=posEarthOLDx-posEarthX;
			trny=posEarthOLDy-posEarthY; 
			context.translate(trnx, trny);			// THIS IS WHERE THE CONTEXT TRANSLATES; AAAA
			contextfg.translate(trnx, trny);			// THIS IS WHERE THE CONTEXT TRANSLATES; AAAA
			

			
			// Had some radnom offset without rounding - even floor doesnt work..even this isn't the best
			
			document.getElementById("button_Switch").innerHTML = "Switch to HELIOCENTRICAL model";
		} else {
			document.getElementById("button_Switch").innerHTML = "Switch to GEOCENTRICAL model";
		}


	// COORDINATES CALCULATRION
	// -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
			// COORDINATES OF THE MOON
			posMoonX = posEarthX+20*Math.cos(fidMoon);
			posMoonY = posEarthY+20*Math.sin(fidMoon);
			
			// COORDINATES of Mercury
			posMercuryX = (posSunX+distWeight*linear_e_Mercury)+(distWeight*aphelionMercury*Math.cos(fidMercury));
			posMercuryY = posSunY+distWeight*amplitudeYMercury*Math.sin(fidMercury);
			
			// COORDINATES of Venus
			posVenusX = (posSunX+distWeight*linear_e_Venus)+(distWeight*aphelionVenus*Math.cos(fidVenus));
			posVenusY = posSunY+distWeight*amplitudeYVenus*Math.sin(fidVenus);

			// COORDINATES of Mars	
			posMarsX = (posSunX+distWeight*linear_e_Mars)+(distWeight*aphelionMars*Math.cos(fidMars));
			posMarsY = posSunY+distWeight*amplitudeYMars*Math.sin(fidMars);

			// COORDINATES of Jupiter
			posJupiterX = (posSunX+distWeight*linear_e_Jupiter)+(distWeight*aphelionJupiter*Math.cos(fidJupiter));
			posJupiterY = posSunY+distWeight*amplitudeYJupiter*Math.sin(fidJupiter);

			// COORDINATES of Saturn
			posSaturnX = (posSunX+distWeight*linear_e_Saturn)+(distWeight*aphelionSaturn*Math.cos(fidSaturn));
			posSaturnY = posSunY+distWeight*amplitudeYSaturn*Math.sin(fidSaturn);
			
			// COORDINATES of Uranus
			posUranusX = (posSunX+distWeight*linear_e_Uranus)+(distWeight*aphelionUranus*Math.cos(fidUranus));
			posUranusY = posSunY+distWeight*amplitudeYUranus*Math.sin(fidUranus);
			
			// COORDINATES of Neptune
			posNeptuneX = (posSunX+distWeight*linear_e_Neptune)+(distWeight*aphelionNeptune*Math.cos(fidNeptune));
			posNeptuneY = posSunY+distWeight*amplitudeYNeptune*Math.sin(fidNeptune);
			
			// COORDINATES of Pluto
			posPlutoX = (posSunX+distWeight*linear_e_Pluto)+(distWeight*aphelionPluto*Math.cos(fidPluto));
			posPlutoY = posSunY+distWeight*amplitudeYPluto*Math.sin(fidPluto);


	// -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	// BUTTONS WHAT DO THEY DO?
		  // TOGGLE BUTTON - between HELIOCENTRICAL or GEOCENTRICAL model
		  button_Switch.onclick = function(event) {
			if (stikalo==0) {
				stikalo = 1;
			} else if (stikalo==1) {
				stikalo = 0;
			}
		  };
			
		// TOGGLE BUTTON - DRAW ON or OFF        ON CLICK
		  button_Draw.onclick = function(event) {
		  
			reset_canvas();		// BECAUSE COUNTING YEARS
		  
			if (drawOn==0) {
				drawOn = 1;
				earthYears=0;		// RESET TIMER
				frameCounter=0;
				document.getElementById("button_Draw").innerHTML = "DRAW OFF";
			} else if (drawOn==1) {
				drawOn = 0;
				earthYears=0;		// RESET TIMER
				document.getElementById("button_Draw").innerHTML = "DRAW ON";
				frameCounter=0;
			}
		  };
		
////			// BUTTON TO CLEAR SCREEN
////			button_Clear.onclick = function(event) {
////				reset_canvas();	reset_canvas();	
////				earthYears=0;
////				fidold2=fid;
////			};
		
		// BUTTON TO RESET SIMULATION
		button_Reset.onclick = function(event) {
			reset_canvas();
		};

		// BUTTON TO STOP TIME
		button_StopTime.onclick = function(event) {
			if (timeIncreasing==0) {
				timeIncreasing=1;
				document.getElementById("button_StopTime").innerHTML = "PAUSE";
			} else if (timeIncreasing==1) {
				timeIncreasing = 0;
				document.getElementById("button_StopTime").innerHTML = "RESUME";
			}
		};
		



	// -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	// SHOW UNITS ON BACKGROUND CNAVA
		contextbg.font = "bold 20px Lucida Console";		
		var postext=20+distWeight;
		var twodotshowmanyearthdays=Math.round(daysInEarthYear*100/samplesPerEarthYear)/100;
	
		contextbg.clearRect(0,0, contextWidth,contextHeight);
		contextbg.fillRect(20,20,distWeight,2);			// 110 pixels at the momoent?
		contextbg.fillRect(20+distWeight,16,2,10);		// 110 pixels at the momoent?
		contextbg.fillRect(20,16,2,10);					// 110 pixels at the momoent?
		contextbg.fillText(" 1 AO ≈ 150.000.000km (for distances between planets)", postext,24);				// IT's moving, have to put it in a backgroudn canvsa... yet again toa voud that.
		
		if (flagPlanetToScale==1) {
			contextbg.fillRect(20,36,2,10);	
			contextbg.fillRect(20,40,planetSizeMORTY,2)
			contextbg.fillRect(20+planetSizeMORTY,36,2,10);	
			contextbg.fillText(" 1 Earth radius",20+planetSizeMORTY,50);			
			contextbg.fillText("[planet sizes are relative to each other, but not to distance between them. Sun size scalled down]", 650,1060)
			
			var planetSizeMercury=planetSizeMORTY*radiusMercury
			var planetSizeVenus=planetSizeMORTY*radiusVenus
			var planetSizeEarth=planetSizeMORTY*radiusEarth
			var planetSizeMars=planetSizeMORTY*radiusMars
			var planetSizeJupiter=planetSizeMORTY*radiusJupiter
			var planetSizeSaturn=planetSizeMORTY*radiusSaturn
			var planetSizeUranus=planetSizeMORTY*radiusUranus
			var planetSizeNeptune=planetSizeMORTY*radiusNeptune
			var planetSizePluto=planetSizeMORTY*radiusPluto
			var planetSizeMoon=planetSizeMORTY*radiusMoon
			var planetSizeSun=planetSizeMORTY*3
		} else {
			var planetSizeMercury=planetSizeMORTY
			var planetSizeVenus=planetSizeMORTY			
			var planetSizeEarth=planetSizeMORTY			
			var planetSizeMars=planetSizeMORTY			
			var planetSizeJupiter=planetSizeMORTY			
			var planetSizeSaturn=planetSizeMORTY			
			var planetSizeUranus=planetSizeMORTY			
			var planetSizeNeptune=planetSizeMORTY			
			var planetSizePluto=planetSizeMORTY			
			var planetSizeMoon=planetSizeMORTY	
			var planetSizeSun=planetSizeMORTY					
		}
			
		contextbg.fillText("2 dots . . = "+ twodotshowmanyearthdays + " Earth days", 20,76);				// IT's moving, have to put it in a backgroudn canvsa... yet again toa voud that.
		contextbg.fillText("Earth Years passed: "+earthYears, 20,98);				// IT's moving, have to put it in a backgroudn canvsa... yet again toa voud that.
		contextbg.fillText("https://github.com/cveto/EarthAtCenter", 20,1060);				// IT's moving, have to put it in a backgroudn canvsa... yet again toa voud that.


		//contextbg.closePath();
		//contextbg.fill();


	// -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	//  PUT THINGS ON CANVASES THERE ARE 2 -- HERE is where I tell javascript to actually put anything on the canvas
		var planetSize=30			// ONLY FOR IMAGES
		context.beginPath();
		contextfg.beginPath();
		
	// PUTS IMAGES OF PLANETS OR BIG CIRCLES ON THE CANVAS (WHICH CANVAS DEPENDS ON IF DRAW IS ON OR OFF::)
	// DRAW lines if DRAW is ON, then stop showing images

	// ALLWAYS CLEAR FG CANVAS	
		contextfg.translate(0,0)
		contextfg.clearRect(0,0, contextWidth,contextHeight);		// DELETE EVERY FRAME

	// IF CANVAS IS PERSISTENT - draw on canvas that is persistent
		if (drawOn==0) {	
			flag_draw=0;	

		// START DRAWING		// ON BACKGROUND CANVAS
			context.translate(0,0)
			context.clearRect(0,0, contextWidth,contextHeight);		// DELETE EVERY FRAME

			// SUN
			if (document.getElementById("markSun").checked == '1') {
				//context.drawImage(imgsun, posSunX-planetSize/2, posSunY-planetSize/2,planetSize,planetSize)
					drawPlanet(posSunX,posSunY,planetSizeSun,"yellow","orange",context);		

			} 
			// MOON
			if (document.getElementById("markMoon").checked == '1') {
			//context.drawImage(imgmoon, posMoonX-planetSize/4, posMoonY-planetSize/4,planetSize/2,planetSize/2);
					drawPlanet(posMoonX,posMoonY,planetSizeMoon,"white","gray",context);		

			} 
			// MERCURY
			if (document.getElementById("markMercury").checked == '1') {
			//context.drawImage(imgmercury, posMercuryX-planetSize/2, posMercuryY-planetSize/2,planetSize,planetSize);
				drawPlanet(posMercuryX,posMercuryY,planetSizeMercury,"yellow","gray",context);		
			
			}  
			// VENUS
			if (document.getElementById("markVenus").checked == '1') {
			//context.drawImage(imgvenus, posVenusX-planetSize/2, posVenusY-planetSize/2,planetSize,planetSize);
			drawPlanet(posVenusX,posVenusY,planetSizeVenus,"orange","brown",context);	
			} 
			
			// EARTH
			if (document.getElementById("markEarth").checked == '1') {
			//context.drawImage(imgearth, posEarthX-planetSize/2, posEarthY-planetSize/2,planetSize,planetSize);
				drawPlanet(posEarthX,posEarthY,planetSizeEarth,"green","blue",context);		
			} 
			  
			// MARS
			if (document.getElementById("markMars").checked == '1') {
			//context.drawImage(imgmars, posMarsX-planetSize/2, posMarsY-planetSize/2,planetSize,planetSize);
				drawPlanet(posMarsX,posMarsY,planetSizeMars,"orange","red",context);		
			} 
			
			// JUPITER
			if (document.getElementById("markJupiter").checked == '1') {
			//context.drawImage(imgjupiter, posJupiterX-planetSize/2, posJupiterY-planetSize/2,planetSize,planetSize);
			drawPlanet(posJupiterX,posJupiterY,planetSizeJupiter,"brown","#ffd9b3",context);	
			}
			
			// Saturn
			if (document.getElementById("markSaturn").checked == '1') {
			//context.drawImage(imgSaturn, posSaturnX-planetSize/2, posSaturnY-planetSize/2,planetSize,planetSize);
			drawPlanet(posSaturnX,posSaturnY,planetSizeSaturn,"gray","#fff2e6",context);	
			} 
			
			// Uranus
			if (document.getElementById("markUranus").checked == '1') {
			//context.drawImage(imgUranus, posUranusX-planetSize/2, posUranusY-planetSize/2,planetSize,planetSize);
			drawPlanet(posUranusX,posUranusY,planetSizeUranus,"green","#b3b3ff",context);	
			}
			
			// Neptune
			if (document.getElementById("markNeptune").checked == '1') {
			//context.drawImage(imgNeptune, posNeptuneX-planetSize/2, posNeptuneY-planetSize/2,planetSize,planetSize);
			drawPlanet(posNeptuneX,posNeptuneY,planetSizeNeptune,"#0000e6","#e6ccff",context);	
			}
			
			// Pluto
			if (document.getElementById("markPluto").checked == '1') {
			//context.drawImage(imgPluto, posPlutoX-planetSize/2, posPlutoY-planetSize/2,planetSize,planetSize);
			drawPlanet(posPlutoX,posPlutoY,planetSizePluto,"yellow","#cce6ff",context);	
			}

	// IF DRAW IS OFF - CLEAR SCREEN EACH TIME
	} else {		// DRAW IS OFF - show planets
		
		// CLEAR ONLY ONCE
		if (flag_draw==0) {
			clear();
			flag_draw=1;	
		}

		// WHICH PLANET?
		  // SUN
			if (document.getElementById("markSun").checked == '1') {
			  context.fillStyle = 'orange';
			  context.fillRect(posSunX, posSunY, linethickness, linethickness);
				drawPlanet(posSunX,posSunY,planetSizeSun,"yellow","orange",contextfg);	
		} 
		
		// MERCURY
		if (document.getElementById("markMercury").checked == '1') {
		  context.fillStyle = 'blue';
		  context.fillRect(posMercuryX, posMercuryY, linethickness, linethickness);
		  
		  //FG CANVAS
			drawPlanet(posMercuryX,posMercuryY,planetSizeMercury,"yellow","gray",contextfg);		
		}  
		
		
		// VENUS
		if (document.getElementById("markVenus").checked == '1') {
		  context.fillStyle = 'purple';
		  //context.fillRect(posVenusX, posVenusY, linethickness, linethickness);

			// ON CANVAS 2 DRAW:
			context.fillRect(posVenusX, posVenusY, linethickness, linethickness);

			// ON CANVAS FG DRAW:		(that canvas gets deleted every time)
			drawPlanet(posVenusX,posVenusY,planetSizeVenus,"orange","brown",contextfg);	
		} 
		
		// EARTH
		if (document.getElementById("markEarth").checked == '1') {
		  context.fillStyle = '#1FF627';			
		  context.fillRect(posEarthX, posEarthY, linethickness, linethickness);
		  
		  // DRAW ON BACKROUND CTX

			drawPlanet(posEarthX,posEarthY,planetSizeEarth,"blue","green",contextfg);		

		} 
		 
		// MOON
		if (document.getElementById("markMoon").checked == '1') {
		  context.fillStyle = 'black';
		  context.fillRect(posMoonX, posMoonY, linethickness, linethickness);
		  
		  // FG CANVAS
			drawPlanet(posMoonX,posMoonY,planetSizeMoon,"white","gray",contextfg);		
		} 
		
		// MARS
		if (document.getElementById("markMars").checked == '1') {
			context.fillStyle = '#F30000';
			context.fillRect(posMarsX, posMarsY, linethickness, linethickness);
			
			// CONTEXT FG
			drawPlanet(posMarsX,posMarsY,planetSizeMars,"orange","red",contextfg);		

		} 
		
		// JUPITER
		if (document.getElementById("markJupiter").checked == '1') {
		  context.fillStyle = '#FF9933';
		  context.fillRect(posJupiterX, posJupiterY, linethickness, linethickness);
		  
			//FG CANVAS
			drawPlanet(posJupiterX,posJupiterY,planetSizeJupiter,"brown","#ffd9b3",contextfg);	
		
		}
		
		// Saturn
		if (document.getElementById("markSaturn").checked == '1') {
		  context.fillStyle = '#CBB838';
		  context.fillRect(posSaturnX, posSaturnY, linethickness, linethickness);
		  //context.fillRect(posSaturnX-20,posSaturnY,posSaturnX+20,posSaturnY+1);
		  
		  // FG CANVAS
			drawPlanet(posSaturnX,posSaturnY,planetSizeSaturn,"gray","#fff2e6",contextfg);	

		}
		
		// Uranus
		if (document.getElementById("markUranus").checked == '1') {
		  context.fillStyle = '#283ECE';
		  context.fillRect(posUranusX, posUranusY, linethickness, linethickness);
		  
		  //FG CANVAS
			drawPlanet(posUranusX,posUranusY,planetSizeUranus,"green","#b3b3ff",contextfg);	

		}
		
		// Neptune
		if (document.getElementById("markNeptune").checked == '1') {
		  context.fillStyle = 'purple';
		  context.fillRect(posNeptuneX, posNeptuneY, linethickness, linethickness);
		  
		  // FG CANVAS
			drawPlanet(posNeptuneX,posNeptuneY,planetSizeNeptune,"#0000e6","#e6ccff",contextfg);	

		}
		
		// Pluto
		if (document.getElementById("markPluto").checked == '1') {
		  context.fillStyle = 'blue';
		  context.fillRect(posPlutoX, posPlutoY, linethickness, linethickness);
		  
		  //FG CANVAS
			drawPlanet(posPlutoX,posPlutoY,planetSizePluto,"yellow","#cce6ff",contextfg);	

		}
	}

	// PUT PLANET NAMES ON FG CANVAS
			var legendLocX=50;
			var legendLocY=150;
			var legendplanetSize=planetSizeMORTY;
			var legendPWidth=10;
			var legendYdist=45;
			contextbg.font = "bold 20px Lucida Console";		

			
			if (document.getElementById("markPluto").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionPluto;

				drawPlanet(legendLocX,legendLocY+legendYdist*8,legendplanetSize,"yellow","#cce6ff",contextbg);
				contextbg.fillText("PLUTO",legendLocX+legendplanetSize+12,legendLocY+legendplanetSize/3+legendYdist*8	);	
			}  
			
			if (document.getElementById("markNeptune").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionNeptune;

				drawPlanet(legendLocX,legendLocY+legendYdist*7,legendplanetSize,"#0000e6","#e6ccff",contextbg);
				contextbg.fillText("NEPTUNE",legendLocX+legendplanetSize+12,legendLocY+legendplanetSize/3+legendYdist*7	);	
			}  
			
			if (document.getElementById("markUranus").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionUranus;
				
				drawPlanet(legendLocX,legendLocY+legendYdist*6,legendplanetSize,"green","#b3b3ff",contextbg);
				contextbg.fillText("URANUS",legendLocX+legendplanetSize+12,legendLocY+legendplanetSize/3+legendYdist*6	);					
			}  
			
			if (document.getElementById("markSaturn").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionSaturn;
				
				drawPlanet(legendLocX,legendLocY+legendYdist*5,legendplanetSize,"gray","#fff2e6",contextbg);
				contextbg.fillText("SATURN",legendLocX+legendplanetSize+12,legendLocY+legendplanetSize/3+legendYdist*5	);					
			}  
			
			if (document.getElementById("markJupiter").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionJupiter;
				
				drawPlanet(legendLocX,legendLocY+legendYdist*4,legendplanetSize,"brown","#ffd9b3",contextbg);
				contextbg.fillText("JUPITER",legendLocX+legendplanetSize+12,legendLocY+legendplanetSize/3+legendYdist*4	);	
			}  
			
			if (document.getElementById("markMars").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionMars;
				
				drawPlanet(legendLocX,legendLocY+legendYdist*3,legendplanetSize,"orange","red",contextbg);
				contextbg.fillText("MARS",legendLocX+legendplanetSize+12,legendLocY+legendplanetSize/3+legendYdist*3	);			
			}   
			
			if (document.getElementById("markVenus").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionVenus;
				
				drawPlanet(legendLocX,legendLocY+legendYdist*1,legendplanetSize,"orange","brown",contextbg);
				contextbg.fillText("VENUS",legendLocX+legendplanetSize+12,legendLocY+legendplanetSize/3+legendYdist*1	);
			}  
			
			if (document.getElementById("markMercury").checked==1) {
				furthestPlanetfromEarth=aphelionEarth+aphelionMercury;
				
				drawPlanet(legendLocX,legendLocY,legendplanetSize,"yellow","white",contextbg);
				contextbg.fillText("MERCURY",legendLocX+legendplanetSize+12,legendLocY+legendplanetSize/3	);
			}  
			
			if (document.getElementById("markEarth").checked==1) {
				furthestPlanetfromEarth=aphelionEarth;
				
				drawPlanet(legendLocX,legendLocY+legendYdist*2,legendplanetSize,"blue","green",contextbg);
				contextbg.fillText("EARTH",legendLocX+legendplanetSize+12,legendLocY+legendplanetSize/3+legendYdist*2	);				
			}








	// -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	// EXPORT TO PNG - NOT ONE; EVERY FRAME - BUT SMARTLY - DEFINE FROM WHICH FRAME TO WHICH FRAME AND IF AT ALL AND ONLY IF PLAYED
	// HUNDREDS OF FRAMES - SAVE THEM TO PNG
		if (document.getElementById("range_downloadFrames").value==1 && timeIncreasing==1) {	
			var howmany=Number(document.getElementById("HowManyFrames").value);
			var fromFrame=Number(document.getElementById("FromFrame").value);
		
			var filename=document.getElementById("filename").value;
			var filename=filename+frameCounter;

			// ONLY DOWNLAD THAT MANY
				

			if (frameCounter <= howmany) {
				if (frameCounter >= fromFrame) {
				downloadCanvas(filename);
				}
			} else {		// STOP SIMULATION WHEN DONE
				timeIncreasing=0;
				document.getElementById("range_downloadFrames").value=0;
			}
		}
		
		// PLANETS TO SCALE
		if (document.getElementById("range_planetsToScale").value==1) {
			flagPlanetToScale=1;
		} else {
			flagPlanetToScale=0;
		}



	// -+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	// Get variables from HTML to JAVASCRIPT
		document.getElementById("earthYears").innerHTML = earthYears;  
		distWeight = Number(document.getElementById("sliderSize").value);
		document.getElementById("valueSize").innerHTML=distWeight;
}

// SAME AS REFRESH
function reset_canvas() {
	t=0;
	fi=0;
	fiMercury=0;
	fiVenus=0;
	fiMars=0;
	fiJupiter=0;
	fiSaturn=0;
	fiUranus=0;
	fiNeptune=0;
	fiPluto=0;
	fiMoon=0;
	earthYears=0;
	fid=0;
	fidMercury=0;
	fidVenus=0;
	fidMars=0;
	fidJupiter=0;
	fidSaturn=0;
	fidUranus=0;
	fidNeptune=0;
	fidPluto=0;
	fidMoon=0;
	
	fid=0;
	frameCounter=0;
	
	clear();
}

// CLEAR THE CANVAS CLEAN
function clear() {
	context.translate(0,0);				// So it clear from the actual zero
	contextbg.translate(0,0);
	contextfg.translate(0,0);
	
	context.clearRect(-3000, -3000, 3000, 3000);			// CLEAR FUCKER!
	context.clearRect(0, 0, canvas.width*2, canvas.height*2);

	contextbg.clearRect(-3000, -3000, 3000, 3000);			// CLEAR FUCKER!
	contextbg.clearRect(0, 0, canvas.width*2, canvas.height*2);
	
	contextfg.clearRect(-3000, -3000, 3000, 3000);			// CLEAR FUCKER!
	contextfg.clearRect(0, 0, canvas.width*2, canvas.height*2);

}

// TO CLEAR RECT OR NOT TO CLEAR CANAS?
function toggleDraw() {
	
  // TOGGLE BUTTON - DRAW ON or OFF
	if (drawOn==0) {
		drawOn = 1;
		document.getElementById("button_Draw").innerHTML = "DRAW OFF";
	} else if (drawOn==1) {
		drawOn = 0;
		document.getElementById("button_Draw").innerHTML = "DRAW ON";
	}
}

// DRAWS THOSE NICE GRADIENT CIRCLES - trying to avoud images, i like software in one file
function drawPlanet(circlex,circley,circleRadius,color1,color2,ctx) {
			var offset=1.5;	
			var oldFillStyle=ctx.fillStyle;
			var radgrad = ctx.createRadialGradient( circlex+offset,	circley+offset,	circleRadius/4,
													circlex+offset,	circley+offset,	circleRadius);
			radgrad.addColorStop(0, color1);
			radgrad.addColorStop(0.9, color2);
			radgrad.addColorStop(1, 'rgba(1,159,98,0)');				
			ctx.fillStyle = radgrad;
			ctx.fillRect(circlex-circleRadius,circley-circleRadius,circlex+2*circleRadius,circley+2*circleRadius);
			ctx.fillStyle = oldFillStyle;

}

// DOWNLOAD CANVASES - merges 3 canvases, white, backgroudn and front to one.
function downloadCanvas(filename) {
	// Copyright to this guy?
	// https://stackoverflow.com/questions/29551841/merge-multiple-canvases-and-download-as-image
	// https://stackoverflow.com/questions/11112321/how-to-save-canvas-as-png-image

	var Whitecanvas = document.getElementById("test_canvas");
		Whitecanvas.width=canvasWidth;
		Whitecanvas.height=canvasHeight;
	
	var ctx = Whitecanvas.getContext("2d");
		ctx.fillStyle = "white";
		ctx.fillRect(0, 0, Whitecanvas.width, Whitecanvas.height);


  var whiteCanvas = document.getElementById('test_canvas');
  var backgroundCanvas = document.getElementById('backgroundCanvas');
  var animatedCanvas = document.getElementById('myCanvas');

  var bottleContext = whiteCanvas.getContext('2d');
  bottleContext.drawImage(backgroundCanvas, 0, 0);
  bottleContext.drawImage(animatedCanvas, 0, 0);

  var dataURL = whiteCanvas.toDataURL("image/png");
  var link = document.createElement('a');
  
  link.download = filename+".png";
  link.href = whiteCanvas.toDataURL("image/png").replace("image/png", "image/octet-stream");
  link.click();
}

// I..forgot what this does, will check it out later
function togglePlanet(body) {
	if (document.getElementById(body).checked==0) {
		document.getElementById(body).checked=1;
	} else {
		document.getElementById(body).checked=0;
	}
}

</script>

<body bgcolor="white" onLoad="init();">

<p id="test1"></p>
<p id="test2"></p>
<p id="test3"></p>
<p id="test4"></p>
<p id="test5"></p>


<div id="wrapper">
        <div id="levi">
			<br /><br /><br /><br />
			<button class="button" id="button_Switch">Switch to GEOCENTRICAL Model</button>	<br /><br />
			<button class="button" id="button_Centralize">CENTRALIZE VIEW</button><br /><br />
			<button class="button" id="button_Draw">DRAW LINES</button>  <br /><br />
			<!-- <button class="button" id="button_Clear"">CLEAR</button><br /><br /> -->
			<button class="button" id="button_Reset"">RESET</button><br /><br />
			<button class="button" id="button_StopTime"">PAUSE</button><br /><br />
			<button class="button" id="button_NormalizeZoom"">NormalizeZoom</button><br /><br />


			Mercury: <input type="checkbox" id="markMercury" checked="1"><br />
			Venus:&nbsp;&nbsp; <input type="checkbox" id="markVenus" checked="1"><br />
			Earth: &nbsp;&nbsp;<input type="checkbox" id="markEarth" checked="1"><br />
			Mars: &nbsp;&nbsp;&nbsp;<input type="checkbox" id="markMars" checked="1"><br /> 
			Jupiter: <input type="checkbox" id="markJupiter" checked="0"><br />


			Saturn: &nbsp;<input type="checkbox" id="markSaturn" checked="1"><br />
			Uranus: &nbsp;<input type="checkbox" id="markUranus" checked="1"><br />
			Neptune: <input type="checkbox" id="markNeptune" checked="1"><br />
			Pluto:&nbsp;&nbsp; <input type="checkbox" id="markPluto" checked="1"><br />

			
			
			Sun: &nbsp;&nbsp;&nbsp;&nbsp;<input type="checkbox" id="markSun" checked="1"><br />
			Moon: &nbsp;&nbsp;&nbsp;<input type="checkbox" id="markMoon" checked="1"><br /><br />
			ZOOM:&nbsp; <input type="range" id="sliderSize" min="1" max="800" value="240"> <span id="valueSize">AA</span><br />
			SMPLS: <input type="range" id="sliderSpeed" min="100" max="5000" value="2000"><span id="valueSpeed">AA</span><br />
			LINE:&nbsp; <input type="range" id="sliderLineThickness" min="1" max="7" value="2"><span id="valueLine">AA</span><br />
			<br />
		
			<input type="range" class="narrowRange "id="range_planetsToScale" min="0" max="1" value="0"> PLANETS TO SCALE:</input> <br/>
			<input type="range" class="narrowRange "id="range_planetSize" min="1" max="30" value="15"> Planet size</input> <br/>

			<p style="font-size:60	px"><b>Earth Years: </b><span id="earthYears"></span></p> <br /> <br />
			
			
			M - DRAW or DON'T DRAW MERCURY <br>
			V - DRAW or DON'T DRAW CENUS <br>
			E - DRAW or DON'T DRAW EARTH <br>
			M - DRAW or DON'T DRAW MARS <br>
			J - DRAW or DON'T DRAW JUPITER <br />
			S - DRAW or DON'T DRAW SATURN 	<br />
			R - DRAW or DON'T DRAW MOON	
			
			<br><br>
			C - CLEAR IMAGE && RESET TIME <br />
			D - DRAW ON/OFF<br /><br />
			
		<input type="range" class="narrowRange" id="range_downloadFrames" min="0" max="1" value="0"> DOWNLOAD FRAMES </input> <br/>
		FROM:<input type="text" id="FromFrame" size="3"></input>
		TO:<input type="text" id="HowManyFrames" size="3"></input><br />
		FILENAME: <input type="text" id="filename" size=7></input>.png


<!-- 			<div align="center"><a class="example_d" rel="nofollow noopener" onclick="downloadCanvas()">  IZVOZI EN PNG </a></div>	 -->

		<p id="frameCounter">0</p>

		</div>
        
		<div id="desni">
		
			<div id="zadej">
				  <canvas id="backgroundCanvas"></canvas>
			</div>
			
			<div id="spredej">
				  <canvas id="myCanvas"></canvas>
			</div>
			
			<div id="seboljspredej">
				  <canvas id="fgcanvas"></canvas>
			</div>
				  
			<!-- They are here because I didn't find a nother way for Javascript to load images from file. -->
<!-- 			<img id="imgsun" src="sun.png" style="display: none;" />
			<img id="imgmercury" src="mercury.png" style="display: none;" />
			<img id="imgvenus" src="venus.png" style="display: none;" />
			<img id="imgearth" src="earth.png" style="display: none;" />
			<img id="imgmars" src="mars.png" style="display: none;" />
			<img id="imgjupiter" src="jupiter.png" style="display: none;" />
			<img id="imgmars" src="mars.png" style="display: none;" />
			<img id="imgjupiter" src="mars.png" style="display: none;" />
			<img id="imgSaturn" src="mars.png" style="display: none;" />
			<img id="imgUranus" src="mars.png" style="display: none;" />
			<img id="imgNeptune" src="mars.png" style="display: none;" />
			<img id="imgPluto" src="mars.png" style="display: none;" /> -->
			
			
			<img id="imgmoon" src="mercury.png" style="display: none;" />		
			<canvas id="test_canvas"></canvas>

		
		</div>

</div>

<!-- 
	- For moon around sun and earth:  1920x1080	Line: 2		Speed: 59	Zoom 446	
	- For venus Earth:							Line: 3     Speed 148  Zoom 260


 -->
</body>